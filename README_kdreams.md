# Kドリームス競輪スクレイピングアプリ

Streamlitを使用した競輪データ取得Webアプリケーション

## 機能

- 📋 当日のS級レース一覧取得
- 🏁 出走表データ（20カラム）の取得
- 🔗 ライン予想（並び予想）の取得
- 💰 3連単オッズ（全通り）の取得
- 📥 CSV形式でのダウンロード

## インストール

```bash
# 依存パッケージのインストール
pip install -r requirements_kdreams.txt
```

## 使い方

```bash
# アプリの起動
streamlit run kdreams_app.py
```

ブラウザで自動的に開きます（通常 http://localhost:8501）

### 操作手順

1. **レース一覧を取得**: サイドバーの「本日のレース一覧を取得」ボタンをクリック
2. **レース選択**: ドロップダウンからレースを選択
3. **データ取得**: 「データを取得」ボタンをクリック（20〜30秒程度）
4. **データ確認**: タブでデータを切り替えて確認
5. **CSVダウンロード**: 各タブのダウンロードボタンでCSV取得

## データ項目

### 出走表（20カラム）
```
枠, 車番, 選手名, 府県, 級班, 年齢, 期別, AI, 競走得点, S, B, 脚, 逃, 捲, 差, マ, 1着, 2着, 3着, 着外
```

### ライン予想
並び予想をテキスト形式で取得（例: "123-45-6"）

### 3連単オッズ
全504通りのオッズデータ（1着,2着,3着,オッズ）

## 注意事項

- ⚠️ Kドリームスのサイト構造変更により動作しない場合があります
- ⚠️ 過度なアクセスはサーバーに負荷をかけるため、適度な間隔で使用してください
- ⚠️ スクレイピングは利用規約を確認の上、自己責任で行ってください

## ファイル構成

```
├── kdreams_app.py             # Streamlitアプリ本体
├── kdreams_scraper.py         # スクレイピングロジック
├── requirements_kdreams.txt   # 依存パッケージ
└── README_kdreams.md         # このファイル
```

## トラブルシューティング

### データが取得できない場合

1. Kドリームスのサイトにブラウザでアクセスできるか確認
2. `kdreams_scraper.py` のセレクタがサイト構造と一致しているか確認
3. エラーメッセージを確認し、該当箇所を修正

### 実際のHTML構造に合わせた調整方法

`kdreams_scraper.py` の各メソッドで、BeautifulSoupのセレクタを実際のHTML構造に合わせて調整してください。

例:
```python
# クラス名で検索
table = soup.find('table', class_='race-table')

# IDで検索
table = soup.find('table', id='race-card')

# 複数条件
table = soup.find('table', {'class': 'table', 'data-type': 'racecard'})
```
